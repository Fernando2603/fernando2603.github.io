<!DOCTYPE html>
<html lang="en-US">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css">
	<link rel="stylesheet" href="css/ship.css">
    <link rel="icon" href="Images/al-favicon.png">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<head>
	<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
	<!-- <meta name="viewport" content="width=device-width, initial-scale=1.0"> -->
	<meta content="utf-8" http-equiv="encoding">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"></script>
	<script type="text/javascript" src="API/OPSI.js"></script>
	<script type="text/javascript" src="API/user.js"></script>
	<title>Fernando26 - Operation Siren</title>
	<style>
		.clear {color: blue;}
		.lethal {color: red;}
		.safe {color: green;}
		.trueUnlock {background-color: palegreen;}
		.falseUnlock {background-color: #faa;}
		.act-btn{
			background: black;
			display: block;
			width: 50px;
			height: 50px;
			line-height: 50px;
			text-align: center;
			color: white;
			font-size: 30px;
			font-weight: bold;
			border-radius: 50%;
			-webkit-border-radius: 50%;
			text-decoration: none;
			transition: ease all 0.3s;
			position: fixed;
			top: 10px;
			left: 10px;
			z-index: 1;
		}
		.act-btn:hover{background: white;}
		.act-btn2 {left: 70px!important;}
		.hide-stars, .hide-rewards, .hide-status, .hide-file, .hide-user, .hide-zones, .hide-corruption {display: none;}
	</style>
</head>
<body>
	<a class="act-btn" href="#" data-toggle="modal" data-target=".settings">
		<div 
			class="parent-button button"
			data-toggle="tooltip"
			data-placement="bottom"
			title="Filter Settings"
		>
			<i class="material-icons">settings</i>
		</div>
	</a>
	<a class="act-btn act-btn2" href="#" data-toggle="modal" data-target=".opsimap">
		<div 
			class="parent-button button"
			data-toggle="tooltip"
			data-placement="bottom"
			title="Operation Siren Maps"
		>
			<i class="material-icons">memory</i>
		</div>
	</a>
	<div class="modal fade settings" tabindex="-1" role="dialog" aria-labelledby="myExtraLargeModalLabel" aria-hidden="true">
    	<div class="modal-dialog modal-xl">
    		<div class="modal-content">
    			<table class="table text-center filter-button">
    				<thead>
    					<tr>
    						<th>Filter</th>
    					</tr>
    				</thead>
    				<thead>
    					<tr>
    						<th>Modifier</th>
    					</tr>
    				</thead>
    				<tbody>
    					<tr>
    						<td>
	    						<button type="button" class="btn btn-90 btn-primary" onclick="buttonter('90');filterByStarsReset()">Completed Stars</button>
	    						<button type="button" class="btn btn-91 btn-primary" onclick="buttonter('91');filterByRewardsReset()">Completed Rewards</button>
	    						<button type="button" class="btn btn-92 btn-primary" onclick="completedZones('92')">Completed Zones</button>
	    						<button type="button" class="btn btn-93 btn-primary" onclick="blockedZones('93')">Locked Zones</button>
							</td>
    					</tr>
    				</tbody>
    				<thead>
    					<tr>
    						<th>Available Stars</th>
    					</tr>
    				</thead>
    				<tbody>
    					<tr>
    						<td>
    							<button type="button" class="btn btn-00 btn-primary" onclick="filterByStarsReset()">All</button>
								<button 
									type="button"
									data-toggle="tooltip"
									data-placement="top"
									title="Gain control of 1 sector(s)." 
									class="btn btn-01 btn-outline-primary uS01" onclick="filterByStars('01','01')"
								>01 - 
								</button>
								<button 
									type="button"
									data-toggle="tooltip"
									data-placement="top"
									title="Perform Reconnaissance x time(s) in anomalous zones." 
									class="btn btn-02 btn-outline-primary uS02" onclick="filterByStars('02','02')"
								>02 - 
								</button>
								<button 
									type="button"
									data-toggle="tooltip"
									data-placement="top"
									title="Use the Siren Data Logging Tower x time(s)." 
									class="btn btn-03 btn-outline-primary uS03" onclick="filterByStars('03','03')"
								>03 - 
								</button>
								<button 
									type="button"
									data-toggle="tooltip"
									data-placement="top"
									title="Use the Siren Scanning Facility x time(s)." 
									class="btn btn-04 btn-outline-primary uS04" onclick="filterByStars('04','04')"
								>04 - 
								</button>
								<button 
									type="button"
									data-toggle="tooltip"
									data-placement="top"
									title="Conduct x Meowfficer retrieval operation(s)." 
									class="btn btn-05 btn-outline-primary uS05" onclick="filterByStars('05','05')"
								>05 - 
								</button>
								<button 
									type="button"
									data-toggle="tooltip"
									data-placement="top"
									title="Encounter the Mysterious Merchant x time(s)." 
									class="btn btn-06 btn-outline-primary uS06" onclick="filterByStars('06','06')"
								>06 - 
								</button>
								<button 
									type="button"
									data-toggle="tooltip"
									data-placement="top"
									title="Obtain x victorie(s)." 
									class="btn btn-07 btn-outline-primary uS07" onclick="filterByStars('07','07')"
								>07 - 
								</button>
								<button 
									type="button"
									data-toggle="tooltip"
									data-placement="top"
									title="Collect x resource node(s)." 
									class="btn btn-08 btn-outline-primary uS08" onclick="filterByStars('08','08')"
								>08 - 
								</button>
								<button 
									type="button"
									data-toggle="tooltip"
									data-placement="top"
									title="Recover 1 record file(s)." 
									class="btn btn-09 btn-outline-primary uS09" onclick="filterByStars('09','09')"
								>09 - 
								</button>
								<button 
									type="button"
									data-toggle="tooltip"
									data-placement="top"
									title="Restore x Energy Matrices to their correct position." 
									class="btn btn-10 btn-outline-primary uS10" onclick="filterByStars('10','10')"
								>10 - 
								</button>
								<button 
									type="button"
									data-toggle="tooltip"
									data-placement="top"
									title="Destroy x Siren weather control device(s)." 
									class="btn btn-11 btn-outline-primary uS11" onclick="filterByStars('11','11')"
								>11 - 
								</button>
								<button 
									type="button"
									data-toggle="tooltip"
									data-placement="top"
									title="Activate x switch mechanism(s)." 
									class="btn btn-12 btn-outline-primary uS12" onclick="filterByStars('12','12')"
								>12 - 
								</button>
								<button 
									type="button"
									data-toggle="tooltip"
									data-placement="top"
									title='Defeat x Promoted "Pawns" fleet(s).'
									class="btn btn-13 btn-outline-primary uS13" onclick="filterByStars('13','13')"
								>13 - 
								</button>
								<button 
									type="button"
									data-toggle="tooltip"
									data-placement="top"
									title='Repel Promoted "Pawns" fleet ambushes x time(s).' 
									class="btn btn-14 btn-outline-primary uS14" onclick="filterByStars('14','14')"
								>14 - 
								</button>
								<button 
									type="button"
									data-toggle="tooltip"
									data-placement="top"
									title="Retrieve sources from enchanced fleets x time(s)." 
									class="btn btn-15 btn-outline-primary uS15" onclick="filterByStars('15','15')"
								>15 - 
								</button>
							</td>
    					</tr>
    				</tbody>
    				<thead>
    					<tr>
    						<th>Rewards</th>
    					</tr>
    				</thead>
    				<tbody>
    					<tr>
    						<td>
    							<button type="button" class="btn btn-16 btn-primary" onclick="filterByRewardsReset()">All</button>
								<button type="button" class="btn btn-17 btn-outline-primary" onclick="filterByRewards('17','01')">Coins</button>
								<button type="button" class="btn btn-18 btn-outline-primary" onclick="filterByRewards('18','02')">High-Efficiency Combat Logistics Plan</button>
								<button type="button" class="btn btn-19 btn-outline-primary" onclick="filterByRewards('19','03')">R4 Siren Coordinate Logger</button>
								<button type="button" class="btn btn-20 btn-outline-primary" onclick="filterByRewards('20','04')">R5 Siren Coordinate Logger</button>
								<button type="button" class="btn btn-21 btn-outline-primary" onclick="filterByRewards('21','05')">R6 Siren Coordinate Logger</button>
								<button type="button" class="btn btn-22 btn-outline-primary" onclick="filterByRewards('22','06')">R6 Coordinate Logger</button>
								<button type="button" class="btn btn-23 btn-outline-primary" onclick="filterByRewards('23','07')">Special Item Tokens</button>
								<button type="button" class="btn btn-24 btn-outline-primary" onclick="filterByRewards('24','08')">Super Rare Cat Box</button>
								<button type="button" class="btn btn-25 btn-outline-primary" onclick="filterByRewards('25','09')">T3 Mystery Gear Part</button>
								<button type="button" class="btn btn-26 btn-outline-primary" onclick="filterByRewards('26','10')">T4 Mystery Gear Part</button>
								<button type="button" class="btn btn-27 btn-outline-primary" onclick="filterByRewards('27','11')">Wisdom Cube</button>
    						</td>
    					</tr>
    				</tbody>
    				<thead>
    					<tr>
    						<th>Corruption</th>
    					</tr>
    				</thead>
    				<tbody>
    					<tr>
    						<td>
	    						<button type="button" class="btn btn-44 btn-primary" onclick="filterByCorruptionReset()">All</button>
	    						<button type="button" class="btn btn-45 btn-outline-primary" onclick="filterByCorruption('45','1')">Corruption 1</button>
	    						<button type="button" class="btn btn-46 btn-outline-primary" onclick="filterByCorruption('46','2')">Corruption 2</button>
	    						<button type="button" class="btn btn-47 btn-outline-primary" onclick="filterByCorruption('47','3')">Corruption 3</button>
	    						<button type="button" class="btn btn-48 btn-outline-primary" onclick="filterByCorruption('48','4')">Corruption 4</button>
	    						<button type="button" class="btn btn-49 btn-outline-primary" onclick="filterByCorruption('49','5')">Corruption 5</button>
	    						<button type="button" class="btn btn-50 btn-outline-primary" onclick="filterByCorruption('50','6')">Corruption 6</button>
	    						<button type="button" class="btn btn-51 btn-outline-primary" onclick="filterByCorruption('51','7')">Corruption 7</button>
							</td>
    					</tr>
    				</tbody>
    				<thead>
    					<tr>
    						<th>Zone Stars Status</th>
    					</tr>
    				</thead>
    				<tbody>
    					<tr>
    						<td>
    							<button type="button" class="btn btn-28 btn-primary" onclick="filterByStatusReset()">All</button>
								<button type="button" class="btn btn-29 btn-outline-primary" onclick="filterByStatus('29','0')">Lethal 0 - Safe 4</button>
								<button type="button" class="btn btn-30 btn-outline-primary" onclick="filterByStatus('30','1')">Lethal 1 - Safe 3</button>
								<button type="button" class="btn btn-31 btn-outline-primary" onclick="filterByStatus('31','2')">Lethal 2 - Safe 2</button>
								<button type="button" class="btn btn-32 btn-outline-primary" onclick="filterByStatus('32','3')">Lethal 3 - Safe 1</button>
								<button type="button" class="btn btn-33 btn-outline-primary" onclick="filterByStatus('33','4')">Lethal 4 - Safe 0</button>
    						</td>
    					</tr>
    				</tbody>
    				<thead>
    					<tr>
    						<th>Record Files</th>
    					</tr>
    				</thead>
    				<tbody>
    					<tr>
    						<td>
    							<button type="button" class="btn btn-34 btn-primary" onclick="filterByFileReset()">All</button>
								<button type="button" class="btn btn-35 btn-outline-primary" onclick="filterByFile('35','1')">Aerolith Incident</button>
								<button type="button" class="btn btn-36 btn-outline-primary" onclick="filterByFile('36','2')">Energy Revolution</button>
								<button type="button" class="btn btn-37 btn-outline-primary" onclick="filterByFile('37','3')">Tech & Life</button>
								<button type="button" class="btn btn-38 btn-outline-primary" onclick="filterByFile('38','4')">New Lifestyle</button>
								<button type="button" class="btn btn-39 btn-outline-primary" onclick="filterByFile('39','5')">Cube Militarization</button>
								<button type="button" class="btn btn-40 btn-outline-primary" onclick="filterByFile('40','6')">Cube Militarization II</button>
								<button type="button" class="btn btn-41 btn-outline-primary" onclick="filterByFile('41','7')">Glimmer Project</button>
								<button type="button" class="btn btn-42 btn-outline-primary" onclick="filterByFile('42','8')">Arms Race</button>
								<button type="button" class="btn btn-43 btn-outline-primary" onclick="filterByFile('43','9')">Cold War Escalation</button>
    						</td>
    					</tr>
    				</tbody>
    			</table>
    		</div>
    	</div>
    </div>
    <div class="modal fade opsimap" tabindex="-1" role="dialog" aria-labelledby="myExtraLargeModalLabel" aria-hidden="true">
    	<div class="modal-dialog modal-xl">
    		<div class="modal-content">
    			<img src="Images/operation-siren-map.png">
			</div>
    	</div>
    </div>
	<div>
		<h1 class="text-center version">Operation Siren</h1>
		<table class="table table-bordered table-hover text-center align-middle">
			<thead>
				<tr>
					<th style="width: 50%">Total Stars</th>
					<th style="width: 50%" class="totalStarsSum"></th>
				</tr>
			</thead>
		</table>
		<table class="table table-bordered table-hover text-center align-middle">
			<thead>
				<tr>
					<th>ID</th>
					<th>Zone</th>
					<th>Corruption</th>
					<th>Stars</th>
					<th>Record File</th>
					<th>Lethal</th>
					<th>Safe</th>
					<th>Requires</th>
				</tr>
			</thead>
			<tbody class="zoneOutput">
			</tbody>
		</table>
	</div>
	<div class="modal-container">
		
	</div>

<script>
	$(function () {$('[data-toggle="tooltip"]').tooltip()})
	$('.version').append(" " + opsiVersion);
	function buttonter(idx) {
		if ($(".btn-"+idx).hasClass("btn-outline-primary")) {
			$(".btn-"+idx).removeClass("btn-outline-primary")
			$(".btn-"+idx).addClass("btn-primary")
		} else {
			$(".btn-"+idx).addClass("btn-outline-primary")
			$(".btn-"+idx).removeClass("btn-primary")
		}
	}

	var filterStars = [];
	var filterRewards = [];
	var filterCorruption = [];
	var filterStatus = [];
	var filterFile = [];

	function filterByStarsReset () {
		$(".btn-00").removeClass("btn-outline-primary").addClass("btn-primary");
		$(`
			.btn-01,
			.btn-02,
			.btn-03,
			.btn-04,
			.btn-05,
			.btn-06,
			.btn-07,
			.btn-08,
			.btn-09,
			.btn-10,
			.btn-11,
			.btn-12,
			.btn-13,
			.btn-14,
			.btn-15
		`).removeClass("btn-primary").removeClass("btn-outline-primary").addClass("btn-outline-primary");
		$(".zone").removeClass("hide-stars");
		filterStars = [];
	}

	function filterByStars (idx, stars) {
		buttonter(idx);

		if($(".btn-"+idx).hasClass("btn-outline-primary")) {
			for (var i = 0; i < filterStars.length; i++) {
				if (filterStars[i].valueOf() == stars) {filterStars.splice(i, 1)}
			}
		} else {
			filterStars.push(stars);
		}

		if (filterStars.length == 0) {
			$(".zone").removeClass("hide-stars");
			$(".btn-00").removeClass("btn-outline-primary").addClass("btn-primary");
		} else {
			$(".zone").addClass("hide-stars")
			$(".btn-00").removeClass("btn-primary").addClass("btn-outline-primary");
		}

		filterStars.forEach((filterStars) => {
			$(".stars-"+filterStars).removeClass("hide-stars")
		})

		if ($(".btn-90").hasClass("btn-outline-primary")) {
			filterStars.forEach((filterStars) => {
				$(".ustar-"+filterStars).addClass("hide-stars")
			})
		}
	}

	function filterByRewardsReset () {
		$(".btn-16").removeClass("btn-outline-primary").addClass("btn-primary");
		$(`
			.btn-17,
			.btn-18,
			.btn-19,
			.btn-20,
			.btn-21,
			.btn-22,
			.btn-23,
			.btn-24,
			.btn-25,
			.btn-26,
			.btn-27
		`).removeClass("btn-primary").removeClass("btn-outline-primary").addClass("btn-outline-primary");
		$(".zone").removeClass("hide-rewards");
		filterRewards = [];
	}

	function filterByRewards (idx, rewards) {
		buttonter(idx);

		if($(".btn-"+idx).hasClass("btn-outline-primary")) {
			for (var i = 0; i < filterRewards.length; i++) {
				if (filterRewards[i].valueOf() == rewards) {filterRewards.splice(i, 1)}
			}
		} else {
			filterRewards.push(rewards);
		}

		if (filterRewards.length == 0) {
			$(".zone").removeClass("hide-rewards");
			$(".btn-16").removeClass("btn-outline-primary").addClass("btn-primary");
		} else {
			$(".zone").addClass("hide-rewards")
			$(".btn-16").removeClass("btn-primary").addClass("btn-outline-primary");
		}

		filterRewards.forEach((filterRewards) => {
			$(".rewards-"+filterRewards).removeClass("hide-rewards")
		})

		if ($(".btn-91").hasClass("btn-outline-primary")) {
			filterRewards.forEach((filterRewards) => {
				$(".ureward-"+filterRewards).addClass("hide-rewards")
			})
		}
	}

	function filterByStatusReset () {
		$(".btn-28").removeClass("btn-outline-primary").addClass("btn-primary");
		$(`
			.btn-29,
			.btn-30,
			.btn-31,
			.btn-32,
			.btn-33
		`).removeClass("btn-primary").removeClass("btn-outline-primary").addClass("btn-outline-primary");
		$(".zone").removeClass("hide-status");
		filterStatus = [];
	}

	function filterByStatus (idx, status) {
		buttonter(idx);

		if($(".btn-"+idx).hasClass("btn-outline-primary")) {
			for (var i = 0; i < filterStatus.length; i++) {
				if (filterStatus[i].valueOf() == status) {filterStatus.splice(i, 1)}
			}
		} else {
			filterStatus.push(status);
		}

		if (filterStatus.length == 0) {
			$(".zone").removeClass("hide-status");
			$(".btn-28").removeClass("btn-outline-primary").addClass("btn-primary");
		} else {
			$(".zone").addClass("hide-status")
			$(".btn-28").removeClass("btn-primary").addClass("btn-outline-primary");
		}

		filterStatus.forEach((filterStatus) => {
			$(".status-"+filterStatus).removeClass("hide-status")
		})
	}

	function filterByCorruptionReset () {
		$(".btn-44").removeClass("btn-outline-primary").addClass("btn-primary");
		$(`
			.btn-45,
			.btn-46,
			.btn-47,
			.btn-48,
			.btn-49,
			.btn-50,
			.btn-51
		`).removeClass("btn-primary").removeClass("btn-outline-primary").addClass("btn-outline-primary");
		$(".zone").removeClass("hide-corruption");
		filterCorruption = [];
	}

	function filterByCorruption (idx, corruption) {
		buttonter(idx);

		if($(".btn-"+idx).hasClass("btn-outline-primary")) {
			for (var i = 0; i < filterCorruption.length; i++) {
				if (filterCorruption[i].valueOf() == corruption) {filterCorruption.splice(i, 1)}
			}
		} else {
			filterCorruption.push(corruption);
		}

		if (filterCorruption.length == 0) {
			$(".zone").removeClass("hide-corruption");
			$(".btn-44").removeClass("btn-outline-primary").addClass("btn-primary");
		} else {
			$(".zone").addClass("hide-corruption")
			$(".btn-44").removeClass("btn-primary").addClass("btn-outline-primary");
		}

		filterCorruption.forEach((filterCorruption) => {
			$(".corruption-"+filterCorruption).removeClass("hide-corruption")
		})
	}

	function filterByFileReset () {
		$(".btn-34").removeClass("btn-outline-primary").addClass("btn-primary");
		$(`
			.btn-35,
			.btn-36,
			.btn-37,
			.btn-38,
			.btn-39,
			.btn-40,
			.btn-41,
			.btn-42,
			.btn-43
		`).removeClass("btn-primary").removeClass("btn-outline-primary").addClass("btn-outline-primary");
		$(".zone").removeClass("hide-file");
		filterFile = [];
	}

	function filterByFile (idx, file) {
		buttonter(idx);

		if($(".btn-"+idx).hasClass("btn-outline-primary")) {
			for (var i = 0; i < filterFile.length; i++) {
				if (filterFile[i].valueOf() == file) {filterFile.splice(i, 1)}
			}
		} else {
			filterFile.push(file);
		}

		if (filterFile.length == 0) {
			$(".zone").removeClass("hide-file");
			$(".btn-34").removeClass("btn-outline-primary").addClass("btn-primary");
		} else {
			$(".zone").addClass("hide-file")
			$(".btn-34").removeClass("btn-primary").addClass("btn-outline-primary");
		}

		filterFile.forEach((filterFile) => {
			$(".file-"+filterFile).removeClass("hide-file")
		})
	}

	function completedZones (idx) {
		buttonter(idx);
		if($(".btn-"+idx).hasClass("btn-outline-primary")) {
			$(".user-completed").addClass("hide-user")
		} else {
			$(".user-completed").removeClass("hide-user")
		}
	}

	function blockedZones (idx) {
		buttonter(idx);
		if($(".btn-"+idx).hasClass("btn-outline-primary")) {
			$(".locked-zones").addClass("hide-zones")
		} else {
			$(".locked-zones").removeClass("hide-zones")
		}
	}

	userTotal = [];
	user.forEach((user) => {userTotal.push(user.star.length)});
	userTotalSum = userTotal.reduce((partial_sum, a) => partial_sum + a,0);
	$(".totalStarsSum").append(userTotalSum + "/360");

	let output = "";
	opsi.forEach((opsi) => {
		let record = "";
		let fileClass = "file-0";
		if(opsi.stars[3].formatted == "Recover 1 record file(s).") {
			if(opsi.stars[3].file == "Aerolith Incident") {record = "1-" + opsi.stars[3].value; fileClass = "file-1";}
			if(opsi.stars[3].file == "Energy Revolution") {record = "2-" + opsi.stars[3].value; fileClass = "file-2";}
			if(opsi.stars[3].file == "Tech & Life") {record = "3-" + opsi.stars[3].value; fileClass = "file-3";}
			if(opsi.stars[3].file == "New Lifestyle") {record = "4-" + opsi.stars[3].value; fileClass = "file-4";}
			if(opsi.stars[3].file == "Cube Militarization") {record = "5-" + opsi.stars[3].value; fileClass = "file-5";}
			if(opsi.stars[3].file == "Cube Militarization II") {record = "6-" + opsi.stars[3].value; fileClass = "file-6";}
			if(opsi.stars[3].file == "Glimmer Project") {record = "7-" + opsi.stars[3].value; fileClass = "file-7";}
			if(opsi.stars[3].file == "Arms Race") {record = "8-" + opsi.stars[3].value; fileClass = "file-8";}
			if(opsi.stars[3].file == "Cold War Escalation") {record = "9-" + opsi.stars[3].value; fileClass = "file-9";}
		}

		let lethal1 = 0; let lethal2 = 0; let lethal3 = 0; let lethal4 = 0; let lethal5 = 0;
			if(opsi.stars[0].condition == "lethal") {lethal1 = 1}
			if(opsi.stars[1].condition == "lethal") {lethal2 = 1}
			if(opsi.stars[2].condition == "lethal") {lethal3 = 1}
			if(opsi.stars[3].condition == "lethal") {lethal4 = 1}
			if(opsi.stars[4].condition == "lethal") {lethal5 = 1}

		let safe1 = 0; let safe2 = 0; let safe3 = 0; let safe4 = 0; let safe5 = 0;
			if(opsi.stars[0].condition == "safe") {safe1 = 1}
			if(opsi.stars[1].condition == "safe") {safe2 = 1}
			if(opsi.stars[2].condition == "safe") {safe3 = 1}
			if(opsi.stars[3].condition == "safe") {safe4 = 1}
			if(opsi.stars[4].condition == "safe") {safe5 = 1}

		lethal = lethal1 + lethal2 + lethal3 + lethal4 + lethal5;
		safe = safe1 + safe2 + safe3 + safe4 + safe5;

		let star1 = ""; let star2 = ""; let star3 = ""; let star4 = ""; let star5 = "";
		let star6 = ""; let star7 = ""; let star8 = ""; let star9 = ""; let star10 = "";
		let star11 = ""; let star12 = ""; let star13 = ""; let star14 = ""; let star15 = "";
		// star type
			if(opsi.stars[1].type == "Perform Reconnaissance x time(s) in anomalous zones.") {star1 = " stars-02"}
			if(opsi.stars[1].type == "Use the Siren Data Logging Tower x time(s).") {star2 = " stars-03"}
			if(opsi.stars[1].type == "Use the Siren Scanning Facility x time(s).") {star3 = " stars-04"}
			if(opsi.stars[1].type == "Conduct x Meowfficer retrieval operation(s).") {star4 = " stars-05"}
			if(opsi.stars[1].type == "Encounter the Mysterious Merchant x time(s).") {star5 = " stars-06"}
			if(opsi.stars[1].type == "Obtain x victorie(s).") {star6 = " stars-07"}
			if(opsi.stars[1].type == "Collect x resource node(s).") {star7 = " stars-08"}
			if(opsi.stars[1].type == "Recover 1 record file(s).") {star8 = " stars-09"}
			if(opsi.stars[1].type == "Restore x Energy Matrices to their correct position.") {star9 = " stars-10"}
			if(opsi.stars[1].type == "Destroy x Siren weather control device(s).") {star10 = " stars-11"}
			if(opsi.stars[1].type == "Activate x switch mechanism(s).") {star11 = " stars-12"}
			if(opsi.stars[1].type == "Defeat x Promoted \"Pawns\" fleet(s).") {star12 = " stars-13"}
			if(opsi.stars[1].type == "Repel Promoted \"Pawns\" fleet ambushes x time(s).") {star13 = " stars-14"}
			if(opsi.stars[1].type == "Retrieve sources from enchanced fleets x time(s).") {star14 = " stars-15"}
			if(opsi.stars[2].type == "Perform Reconnaissance x time(s) in anomalous zones.") {star1 = " stars-02"}
			if(opsi.stars[2].type == "Use the Siren Data Logging Tower x time(s).") {star2 = " stars-03"}
			if(opsi.stars[2].type == "Use the Siren Scanning Facility x time(s).") {star3 = " stars-04"}
			if(opsi.stars[2].type == "Conduct x Meowfficer retrieval operation(s).") {star4 = " stars-05"}
			if(opsi.stars[2].type == "Encounter the Mysterious Merchant x time(s).") {star5 = " stars-06"}
			if(opsi.stars[2].type == "Obtain x victorie(s).") {star6 = " stars-07"}
			if(opsi.stars[2].type == "Collect x resource node(s).") {star7 = " stars-08"}
			if(opsi.stars[2].type == "Recover 1 record file(s).") {star8 = " stars-09"}
			if(opsi.stars[2].type == "Restore x Energy Matrices to their correct position.") {star9 = " stars-10"}
			if(opsi.stars[2].type == "Destroy x Siren weather control device(s).") {star10 = " stars-11"}
			if(opsi.stars[2].type == "Activate x switch mechanism(s).") {star11 = " stars-12"}
			if(opsi.stars[2].type == "Defeat x Promoted \"Pawns\" fleet(s).") {star12 = " stars-13"}
			if(opsi.stars[2].type == "Repel Promoted \"Pawns\" fleet ambushes x time(s).") {star13 = " stars-14"}
			if(opsi.stars[2].type == "Retrieve sources from enchanced fleets x time(s).") {star14 = " stars-15"}
			if(opsi.stars[3].type == "Perform Reconnaissance x time(s) in anomalous zones.") {star1 = " stars-02"}
			if(opsi.stars[3].type == "Use the Siren Data Logging Tower x time(s).") {star2 = " stars-03"}
			if(opsi.stars[3].type == "Use the Siren Scanning Facility x time(s).") {star3 = " stars-04"}
			if(opsi.stars[3].type == "Conduct x Meowfficer retrieval operation(s).") {star4 = " stars-05"}
			if(opsi.stars[3].type == "Encounter the Mysterious Merchant x time(s).") {star5 = " stars-06"}
			if(opsi.stars[3].type == "Obtain x victorie(s).") {star6 = " stars-07"}
			if(opsi.stars[3].type == "Collect x resource node(s).") {star7 = " stars-08"}
			if(opsi.stars[3].type == "Recover 1 record file(s).") {star8 = " stars-09"}
			if(opsi.stars[3].type == "Restore x Energy Matrices to their correct position.") {star9 = " stars-10"}
			if(opsi.stars[3].type == "Destroy x Siren weather control device(s).") {star10 = " stars-11"}
			if(opsi.stars[3].type == "Activate x switch mechanism(s).") {star11 = " stars-12"}
			if(opsi.stars[3].type == "Defeat x Promoted \"Pawns\" fleet(s).") {star12 = " stars-13"}
			if(opsi.stars[3].type == "Repel Promoted \"Pawns\" fleet ambushes x time(s).") {star13 = " stars-14"}
			if(opsi.stars[3].type == "Retrieve sources from enchanced fleets x time(s).") {star14 = " stars-15"}
			if(opsi.stars[4].type == "Perform Reconnaissance x time(s) in anomalous zones.") {star1 = " stars-02"}
			if(opsi.stars[4].type == "Use the Siren Data Logging Tower x time(s).") {star2 = " stars-03"}
			if(opsi.stars[4].type == "Use the Siren Scanning Facility x time(s).") {star3 = " stars-04"}
			if(opsi.stars[4].type == "Conduct x Meowfficer retrieval operation(s).") {star4 = " stars-05"}
			if(opsi.stars[4].type == "Encounter the Mysterious Merchant x time(s).") {star5 = " stars-06"}
			if(opsi.stars[4].type == "Obtain x victorie(s).") {star6 = " stars-07"}
			if(opsi.stars[4].type == "Collect x resource node(s).") {star7 = " stars-08"}
			if(opsi.stars[4].type == "Recover 1 record file(s).") {star8 = " stars-09"}
			if(opsi.stars[4].type == "Restore x Energy Matrices to their correct position.") {star9 = " stars-10"}
			if(opsi.stars[4].type == "Destroy x Siren weather control device(s).") {star10 = " stars-11"}
			if(opsi.stars[4].type == "Activate x switch mechanism(s).") {star11 = " stars-12"}
			if(opsi.stars[4].type == "Defeat x Promoted \"Pawns\" fleet(s).") {star12 = " stars-13"}
			if(opsi.stars[4].type == "Repel Promoted \"Pawns\" fleet ambushes x time(s).") {star13 = " stars-14"}
			if(opsi.stars[4].type == "Retrieve sources from enchanced fleets x time(s).") {star14 = " stars-15"}
		if(opsi.id == 154) {star0 = "";} else {star0 = "stars-01"}
		stars = star0 + star1 + star2 + star3 + star4 + star5 + star6 + star7 + star8 + star9 + star10 + star11 + star12 + star13 + star14 + star15;

		let reward1 = ""; let reward2 = ""; let reward3 = ""; let reward4 = ""; let reward5 = "";
		let reward6 = ""; let reward7 = ""; let reward8 = ""; let reward9 = ""; let reward10 = ""; let reward11 = "";
		// reward type
			if(opsi.rewards[0].item == "Coins") {reward1 = " rewards-01"}
			if(opsi.rewards[0].item == "High-Efficiency Combat Logistics Plan") {reward2 = " rewards-02"}
			if(opsi.rewards[0].item == "R4 Siren Coordinate Logger") {reward3 = " rewards-03"}
			if(opsi.rewards[0].item == "R5 Siren Coordinate Logger") {reward4 = " rewards-04"}
			if(opsi.rewards[0].item == "R6 Siren Coordinate Logger") {reward5 = " rewards-05"}
			if(opsi.rewards[0].item == "R6 Coordinate Logger") {reward6 = " rewards-06"}
			if(opsi.rewards[0].item == "Special Item Tokens") {reward7 = " rewards-07"}
			if(opsi.rewards[0].item == "Super Rare Cat Box") {reward8 = " rewards-08"}
			if(opsi.rewards[0].item == "T3 Mystery Gear Part") {reward9 = " rewards-09"}
			if(opsi.rewards[0].item == "T4 Mystery Gear Part") {reward10 = " rewards-10"}
			if(opsi.rewards[0].item == "Wisdom Cube") {reward11 = " rewards-11"}
			if(opsi.rewards[1].item == "Coins") {reward1 = " rewards-01"}
			if(opsi.rewards[1].item == "High-Efficiency Combat Logistics Plan") {reward2 = " rewards-02"}
			if(opsi.rewards[1].item == "R4 Siren Coordinate Logger") {reward3 = " rewards-03"}
			if(opsi.rewards[1].item == "R5 Siren Coordinate Logger") {reward4 = " rewards-04"}
			if(opsi.rewards[1].item == "R6 Siren Coordinate Logger") {reward5 = " rewards-05"}
			if(opsi.rewards[1].item == "R6 Coordinate Logger") {reward6 = " rewards-06"}
			if(opsi.rewards[1].item == "Special Item Tokens") {reward7 = " rewards-07"}
			if(opsi.rewards[1].item == "Super Rare Cat Box") {reward8 = " rewards-08"}
			if(opsi.rewards[1].item == "T3 Mystery Gear Part") {reward9 = " rewards-09"}
			if(opsi.rewards[1].item == "T4 Mystery Gear Part") {reward10 = " rewards-10"}
			if(opsi.rewards[1].item == "Wisdom Cube") {reward11 = " rewards-11"}
			if(opsi.rewards[2].item == "Coins") {reward1 = " rewards-01"}
			if(opsi.rewards[2].item == "High-Efficiency Combat Logistics Plan") {reward2 = " rewards-02"}
			if(opsi.rewards[2].item == "R4 Siren Coordinate Logger") {reward3 = " rewards-03"}
			if(opsi.rewards[2].item == "R5 Siren Coordinate Logger") {reward4 = " rewards-04"}
			if(opsi.rewards[2].item == "R6 Siren Coordinate Logger") {reward5 = " rewards-05"}
			if(opsi.rewards[2].item == "R6 Coordinate Logger") {reward6 = " rewards-06"}
			if(opsi.rewards[2].item == "Special Item Tokens") {reward7 = " rewards-07"}
			if(opsi.rewards[2].item == "Super Rare Cat Box") {reward8 = " rewards-08"}
			if(opsi.rewards[2].item == "T3 Mystery Gear Part") {reward9 = " rewards-09"}
			if(opsi.rewards[2].item == "T4 Mystery Gear Part") {reward10 = " rewards-10"}
			if(opsi.rewards[2].item == "Wisdom Cube") {reward11 = " rewards-11"}
			if(opsi.rewards[3].item == "Coins") {reward1 = " rewards-01"}
			if(opsi.rewards[3].item == "High-Efficiency Combat Logistics Plan") {reward2 = " rewards-02"}
			if(opsi.rewards[3].item == "R4 Siren Coordinate Logger") {reward3 = " rewards-03"}
			if(opsi.rewards[3].item == "R5 Siren Coordinate Logger") {reward4 = " rewards-04"}
			if(opsi.rewards[3].item == "R6 Siren Coordinate Logger") {reward5 = " rewards-05"}
			if(opsi.rewards[3].item == "R6 Coordinate Logger") {reward6 = " rewards-06"}
			if(opsi.rewards[3].item == "Special Item Tokens") {reward7 = " rewards-07"}
			if(opsi.rewards[3].item == "Super Rare Cat Box") {reward8 = " rewards-08"}
			if(opsi.rewards[3].item == "T3 Mystery Gear Part") {reward9 = " rewards-09"}
			if(opsi.rewards[3].item == "T4 Mystery Gear Part") {reward10 = " rewards-10"}
			if(opsi.rewards[3].item == "Wisdom Cube") {reward11 = " rewards-11"}
			if(opsi.rewards[4].item == "Coins") {reward1 = " rewards-01"}
			if(opsi.rewards[4].item == "High-Efficiency Combat Logistics Plan") {reward2 = " rewards-02"}
			if(opsi.rewards[4].item == "R4 Siren Coordinate Logger") {reward3 = " rewards-03"}
			if(opsi.rewards[4].item == "R5 Siren Coordinate Logger") {reward4 = " rewards-04"}
			if(opsi.rewards[4].item == "R6 Siren Coordinate Logger") {reward5 = " rewards-05"}
			if(opsi.rewards[4].item == "R6 Coordinate Logger") {reward6 = " rewards-06"}
			if(opsi.rewards[4].item == "Special Item Tokens") {reward7 = " rewards-07"}
			if(opsi.rewards[4].item == "Super Rare Cat Box") {reward8 = " rewards-08"}
			if(opsi.rewards[4].item == "T3 Mystery Gear Part") {reward9 = " rewards-09"}
			if(opsi.rewards[4].item == "T4 Mystery Gear Part") {reward10 = " rewards-10"}
			if(opsi.rewards[4].item == "Wisdom Cube") {reward11 = " rewards-11"}
		rewards = reward1 + reward2 + reward3 + reward4 + reward5 + reward6 + reward7 + reward8 + reward9 + reward10 + reward11; 

		for (var i = 0; i < user.length; i++) {
			if (user[i].id == opsi.id) {
				starLength = user[i].star.length;
				if(opsi.id !== 154) {sLP5 = starLength + "/5"} else {sLP5 = starLength + "/0"}
				let uReward1 = ""; let uReward2 = ""; let uReward3 = ""; let uReward4 = ""; let uReward5 = "";
				// user reward type
					if(opsi.rewards[0].item == "Coins") {uReward1 = "ureward-01";}
					if(opsi.rewards[0].item == "High-Efficiency Combat Logistics Plan") {uReward1 = "ureward-02";}
					if(opsi.rewards[0].item == "R4 Siren Coordinate Logger") {uReward1 = "ureward-03";}
					if(opsi.rewards[0].item == "R5 Siren Coordinate Logger") {uReward1 = "ureward-04";}
					if(opsi.rewards[0].item == "R6 Siren Coordinate Logger") {uReward1 = "ureward-05";}
					if(opsi.rewards[0].item == "R6 Coordinate Logger") {uReward1 = "ureward-06";}
					if(opsi.rewards[0].item == "Special Item Tokens") {uReward1 = "ureward-07";}
					if(opsi.rewards[0].item == "Super Rare Cat Box") {uReward1 = "ureward-08";}
					if(opsi.rewards[0].item == "T3 Mystery Gear Part") {uReward1 = "ureward-09";}
					if(opsi.rewards[0].item == "T4 Mystery Gear Part") {uReward1 = "ureward-10";}
					if(opsi.rewards[0].item == "Wisdom Cube") {uReward1 = "ureward-11";}
					if(opsi.rewards[1].item == "Coins") {uReward2 = "ureward-01";}
					if(opsi.rewards[1].item == "High-Efficiency Combat Logistics Plan") {uReward2 = "ureward-02";}
					if(opsi.rewards[1].item == "R4 Siren Coordinate Logger") {uReward2 = "ureward-03";}
					if(opsi.rewards[1].item == "R5 Siren Coordinate Logger") {uReward2 = "ureward-04";}
					if(opsi.rewards[1].item == "R6 Siren Coordinate Logger") {uReward2 = "ureward-05";}
					if(opsi.rewards[1].item == "R6 Coordinate Logger") {uReward2 = "ureward-06";}
					if(opsi.rewards[1].item == "Special Item Tokens") {uReward2 = "ureward-07";}
					if(opsi.rewards[1].item == "Super Rare Cat Box") {uReward2 = "ureward-08";}
					if(opsi.rewards[1].item == "T3 Mystery Gear Part") {uReward2 = "ureward-09";}
					if(opsi.rewards[1].item == "T4 Mystery Gear Part") {uReward2 = "ureward-10";}
					if(opsi.rewards[1].item == "Wisdom Cube") {uReward2 = "ureward-11";}
					if(opsi.rewards[2].item == "Coins") {uReward3 = "ureward-01";}
					if(opsi.rewards[2].item == "High-Efficiency Combat Logistics Plan") {uReward3 = "ureward-02";}
					if(opsi.rewards[2].item == "R4 Siren Coordinate Logger") {uReward3 = "ureward-03";}
					if(opsi.rewards[2].item == "R5 Siren Coordinate Logger") {uReward3 = "ureward-04";}
					if(opsi.rewards[2].item == "R6 Siren Coordinate Logger") {uReward3 = "ureward-05";}
					if(opsi.rewards[2].item == "R6 Coordinate Logger") {uReward3 = "ureward-06";}
					if(opsi.rewards[2].item == "Special Item Tokens") {uReward3 = "ureward-07";}
					if(opsi.rewards[2].item == "Super Rare Cat Box") {uReward3 = "ureward-08";}
					if(opsi.rewards[2].item == "T3 Mystery Gear Part") {uReward3 = "ureward-09";}
					if(opsi.rewards[2].item == "T4 Mystery Gear Part") {uReward3 = "ureward-10";}
					if(opsi.rewards[2].item == "Wisdom Cube") {uReward3 = "ureward-11";}
					if(opsi.rewards[3].item == "Coins") {uReward4 = "ureward-01";}
					if(opsi.rewards[3].item == "High-Efficiency Combat Logistics Plan") {uReward4 = "ureward-02";}
					if(opsi.rewards[3].item == "R4 Siren Coordinate Logger") {uReward4 = "ureward-03";}
					if(opsi.rewards[3].item == "R5 Siren Coordinate Logger") {uReward4 = "ureward-04";}
					if(opsi.rewards[3].item == "R6 Siren Coordinate Logger") {uReward4 = "ureward-05";}
					if(opsi.rewards[3].item == "R6 Coordinate Logger") {uReward4 = "ureward-06";}
					if(opsi.rewards[3].item == "Special Item Tokens") {uReward4 = "ureward-07";}
					if(opsi.rewards[3].item == "Super Rare Cat Box") {uReward4 = "ureward-08";}
					if(opsi.rewards[3].item == "T3 Mystery Gear Part") {uReward4 = "ureward-09";}
					if(opsi.rewards[3].item == "T4 Mystery Gear Part") {uReward4 = "ureward-10";}
					if(opsi.rewards[3].item == "Wisdom Cube") {uReward4 = "ureward-11";}
					if(opsi.rewards[4].item == "Coins") {uReward5 = "ureward-01";}
					if(opsi.rewards[4].item == "High-Efficiency Combat Logistics Plan") {uReward5 = "ureward-02";}
					if(opsi.rewards[4].item == "R4 Siren Coordinate Logger") {uReward5 = "ureward-03";}
					if(opsi.rewards[4].item == "R5 Siren Coordinate Logger") {uReward5 = "ureward-04";}
					if(opsi.rewards[4].item == "R6 Siren Coordinate Logger") {uReward5 = "ureward-05";}
					if(opsi.rewards[4].item == "R6 Coordinate Logger") {uReward5 = "ureward-06";}
					if(opsi.rewards[4].item == "Special Item Tokens") {uReward5 = "ureward-07";}
					if(opsi.rewards[4].item == "Super Rare Cat Box") {uReward5 = "ureward-08";}
					if(opsi.rewards[4].item == "T3 Mystery Gear Part") {uReward5 = "ureward-09";}
					if(opsi.rewards[4].item == "T4 Mystery Gear Part") {uReward5 = "ureward-10";}
					if(opsi.rewards[4].item == "Wisdom Cube") {uReward5 = "ureward-11";}
				if(starLength == 0) {uReward = ""}
				if(starLength == 1) {uReward = uReward1}
				if(starLength == 2) {uReward = uReward1 + " " + uReward2}
				if(starLength == 3) {uReward = uReward1 + " " + uReward2 + " " + uReward3}
				if(starLength == 4) {uReward = uReward1 + " " + uReward2 + " " + uReward3 + " " + uReward4}
				if(starLength == 5) {uReward = uReward1 + " " + uReward2 + " " + uReward3 + " " + uReward4 + " " + uReward5}
				uC = ""; uH = ""; uSC = "";
				if(user[i].star.length == 1) {uH = "user-1"}
				if(user[i].star.length == 2) {uH = "user-2"}
				if(user[i].star.length == 3) {uH = "user-3"}
				if(user[i].star.length == 4) {uH = "user-4"}
				if(user[i].star.length == 5) {uH = "user-5"; uC = "trueUnlock"; uSC = "user-completed"};
				let uStar1 = ""; let uStar2 = ""; let uStar3 = ""; let uStar4 = ""; let uStar5 = "";
				for (var x = 0; x < user[i].star.length; x++) {
					if (user[i].star[x] == 1) {
						if(opsi.stars[0].type == "Gain control of 1 sector(s).") {uStar1 = "ustar-01"}
					}
					if (user[i].star[x] == 2) {
						if(opsi.stars[1].type == "Perform Reconnaissance x time(s) in anomalous zones.") {uStar2 = "ustar-02"}
						if(opsi.stars[1].type == "Use the Siren Data Logging Tower x time(s).") {uStar2 = "ustar-03"}
						if(opsi.stars[1].type == "Use the Siren Scanning Facility x time(s).") {uStar2 = "ustar-04"}
						if(opsi.stars[1].type == "Conduct x Meowfficer retrieval operation(s).") {uStar2 = "ustar-05"}
						if(opsi.stars[1].type == "Encounter the Mysterious Merchant x time(s).") {uStar2 = "ustar-06"}
						if(opsi.stars[1].type == "Obtain x victorie(s).") {uStar2 = "ustar-07"}
						if(opsi.stars[1].type == "Collect x resource node(s)." ) {uStar2 = "ustar-08"}
						if(opsi.stars[1].type == "Recover 1 record file(s).") {uStar2 = "ustar-09"}
						if(opsi.stars[1].type == "Restore x Energy Matrices to their correct position.") {uStar2 = "ustar-10"}
						if(opsi.stars[1].type == "Destroy x Siren weather control device(s).") {uStar2 = "ustar-11"}
						if(opsi.stars[1].type == "Activate x switch mechanism(s).") {uStar2 = "ustar-12"}
						if(opsi.stars[1].type == "Defeat x Promoted \"Pawns\" fleet(s).") {uStar2 = "ustar-13"}
						if(opsi.stars[1].type == "Repel Promoted \"Pawns\" fleet ambushes x time(s).") {uStar2 = "ustar-14"}
						if(opsi.stars[1].type == "Retrieve sources from enchanced fleets x time(s).") {uStar2 = "ustar-15"}
					}
					if (user[i].star[x] == 3) {
						if(opsi.stars[2].type == "Perform Reconnaissance x time(s) in anomalous zones.") {uStar3 = "ustar-02"}
						if(opsi.stars[2].type == "Use the Siren Data Logging Tower x time(s).") {uStar3 = "ustar-03"}
						if(opsi.stars[2].type == "Use the Siren Scanning Facility x time(s).") {uStar3 = "ustar-04"}
						if(opsi.stars[2].type == "Conduct x Meowfficer retrieval operation(s).") {uStar3 = "ustar-05"}
						if(opsi.stars[2].type == "Encounter the Mysterious Merchant x time(s).") {uStar3 = "ustar-06"}
						if(opsi.stars[2].type == "Obtain x victorie(s).") {uStar3 = "ustar-07"}
						if(opsi.stars[2].type == "Collect x resource node(s)." ) {uStar3 = "ustar-08"}
						if(opsi.stars[2].type == "Recover 1 record file(s).") {uStar3 = "ustar-09"}
						if(opsi.stars[2].type == "Restore x Energy Matrices to their correct position.") {uStar3 = "ustar-10"}
						if(opsi.stars[2].type == "Destroy x Siren weather control device(s).") {uStar3 = "ustar-11"}
						if(opsi.stars[2].type == "Activate x switch mechanism(s).") {uStar3 = "ustar-12"}
						if(opsi.stars[2].type == "Defeat x Promoted \"Pawns\" fleet(s).") {uStar3 = "ustar-13"}
						if(opsi.stars[2].type == "Repel Promoted \"Pawns\" fleet ambushes x time(s).") {uStar3 = "ustar-14"}
						if(opsi.stars[2].type == "Retrieve sources from enchanced fleets x time(s).") {uStar3 = "ustar-15"}
					}
					if (user[i].star[x] == 4) {
						if(opsi.stars[3].type == "Perform Reconnaissance x time(s) in anomalous zones.") {uStar4 = "ustar-02"}
						if(opsi.stars[3].type == "Use the Siren Data Logging Tower x time(s).") {uStar4 = "ustar-03"}
						if(opsi.stars[3].type == "Use the Siren Scanning Facility x time(s).") {uStar4 = "ustar-04"}
						if(opsi.stars[3].type == "Conduct x Meowfficer retrieval operation(s).") {uStar4 = "ustar-05"}
						if(opsi.stars[3].type == "Encounter the Mysterious Merchant x time(s).") {uStar4 = "ustar-06"}
						if(opsi.stars[3].type == "Obtain x victorie(s).") {uStar4 = "ustar-07"}
						if(opsi.stars[3].type == "Collect x resource node(s)." ) {uStar4 = "ustar-08"}
						if(opsi.stars[3].type == "Recover 1 record file(s).") {uStar4 = "ustar-09"}
						if(opsi.stars[3].type == "Restore x Energy Matrices to their correct position.") {uStar4 = "ustar-10"}
						if(opsi.stars[3].type == "Destroy x Siren weather control device(s).") {uStar4 = "ustar-11"}
						if(opsi.stars[3].type == "Activate x switch mechanism(s).") {uStar4 = "ustar-12"}
						if(opsi.stars[3].type == "Defeat x Promoted \"Pawns\" fleet(s).") {uStar4 = "ustar-13"}
						if(opsi.stars[3].type == "Repel Promoted \"Pawns\" fleet ambushes x time(s).") {uStar4 = "ustar-14"}
						if(opsi.stars[3].type == "Retrieve sources from enchanced fleets x time(s).") {uStar4 = "ustar-15"}
					}
					if (user[i].star[x] == 5) {
						if(opsi.stars[4].type == "Perform Reconnaissance x time(s) in anomalous zones.") {uStar5 = "ustar-02"}
						if(opsi.stars[4].type == "Use the Siren Data Logging Tower x time(s).") {uStar5 = "ustar-03"}
						if(opsi.stars[4].type == "Use the Siren Scanning Facility x time(s).") {uStar5 = "ustar-04"}
						if(opsi.stars[4].type == "Conduct x Meowfficer retrieval operation(s).") {uStar5 = "ustar-05"}
						if(opsi.stars[4].type == "Encounter the Mysterious Merchant x time(s).") {uStar5 = "ustar-06"}
						if(opsi.stars[4].type == "Obtain x victorie(s).") {uStar5 = "ustar-07"}
						if(opsi.stars[4].type == "Collect x resource node(s)." ) {uStar5 = "ustar-08"}
						if(opsi.stars[4].type == "Recover 1 record file(s).") {uStar5 = "ustar-09"}
						if(opsi.stars[4].type == "Restore x Energy Matrices to their correct position.") {uStar5 = "ustar-10"}
						if(opsi.stars[4].type == "Destroy x Siren weather control device(s).") {uStar5 = "ustar-11"}
						if(opsi.stars[4].type == "Activate x switch mechanism(s).") {uStar5 = "ustar-12"}
						if(opsi.stars[4].type == "Defeat x Promoted \"Pawns\" fleet(s).") {uStar5 = "ustar-13"}
						if(opsi.stars[4].type == "Repel Promoted \"Pawns\" fleet ambushes x time(s).") {uStar5 = "ustar-14"}
						if(opsi.stars[4].type == "Retrieve sources from enchanced fleets x time(s).") {uStar5 = "ustar-15"}
					}
				}
				uSClass = uStar1 + " " + uStar2 + " " + uStar3 + " " + uStar4 + " " + uStar5;
			}
		}

		if(opsi.unlocked == false) {lockedZones = "locked-zones"} else {lockedZones = ""}
		corruption = opsi.corruption;
		corruptionClass = `corruption-${corruption}`;

		output += `
			<tr 
				class="o${opsi.id} zone ${uSC} ${corruptionClass} ${fileClass} ${lockedZones} status-${lethal} ${stars}${rewards} ${uH} ${uSClass} ${uReward}" 
				onclick="modalCall(${opsi.id})" 
				data-toggle="modal"
				data-target=".modal${opsi.id}"
			>
				<td class="${opsi.unlocked}Unlock">${opsi.id}</td>
				<td class="${uC}">${opsi.name}</td>
				<td>${corruption}</td>
				<td>${sLP5}</td>
				<td>${record}</td>
				<td>${lethal}</td>
				<td>${safe}</td>
				<td>${opsi.require}</td>
			</tr>
		`
		$(".zoneOutput").html(output)
	})

	$(".uS01").append($(".ustar-01").length + "/72");
	$(".uS02").append($(".ustar-02").length + "/36");
	$(".uS03").append($(".ustar-03").length + "/12");
	$(".uS04").append($(".ustar-04").length + "/9");
	$(".uS05").append($(".ustar-05").length + "/8");
	$(".uS06").append($(".ustar-06").length + "/11");
	$(".uS07").append($(".ustar-07").length + "/36");
	$(".uS08").append($(".ustar-08").length + "/36");
	$(".uS09").append($(".ustar-09").length + "/54");
	$(".uS10").append($(".ustar-10").length + "/10");
	$(".uS11").append($(".ustar-11").length + "/10");
	$(".uS12").append($(".ustar-12").length + "/10");
	$(".uS13").append($(".ustar-13").length + "/36");
	$(".uS14").append($(".ustar-14").length + "/11");
	$(".uS15").append($(".ustar-15").length + "/9");

	function modalCall(id) {
		modalCreate(id);
		$(".o"+id).removeAttr("onclick")
		$(function () {$('[data-toggle="tooltip"]').tooltip()})
	}

	function modalCreate (id) {
		let modal = ""
		let recordFile = "None";
		let us1 = ""; let us2 = ""; let us3 = ""; let us4 = ""; let us5 = "";
		let usr1 = 0; let usr2 = 0; let usr3 = 0;  let usr4 = 0;  let usr5 = 0;
		for (var i = 0; i < opsi.length; i++) {
			if (opsi[i].id == id) {
				op = opsi[i];
				name = op.name;
				for (var x = 0; x < user.length; x++) {
					if (user[x].id == id) {
						if (user[x].star.length == 5) {
							us1 = "trueUnlock"; us2 = "trueUnlock"; us3 = "trueUnlock"; us4 = "trueUnlock"; us5 = "trueUnlock"; 
							usr1 = 1;usr2 = 1; usr3 = 1;usr4 = 1; usr5 = 1;}
						if (user[x].star.length < 5) {
							for(var z = 0; z < user[x].star.length; z++) {
								if (user[x].star[z].valueOf() == 1) {us1 = "trueUnlock"; usr1 = 1;}
								if (user[x].star[z].valueOf() == 2) {us2 = "trueUnlock"; usr2 = 1;}
								if (user[x].star[z].valueOf() == 3) {us3 = "trueUnlock"; usr3 = 1;}
								if (user[x].star[z].valueOf() == 4) {us4 = "trueUnlock"; usr4 = 1;}
								if (user[x].star[z].valueOf() == 5) {us5 = "trueUnlock"; usr5 = 1;}
							}
						}
					}
				}
				star1 = `<td class="${op.stars[0].condition} ${us1}">${op.stars[0].formatted}</td>`;
				star2 = `<td class="${op.stars[1].condition} ${us2}">${op.stars[1].formatted}</td>`;
				star3 = `<td class="${op.stars[2].condition} ${us3}">${op.stars[2].formatted}</td>`;
				star4 = `<td class="${op.stars[3].condition} ${us4}">${op.stars[3].formatted}</td>`;
				star5 = `<td class="${op.stars[4].condition} ${us5}">${op.stars[4].formatted}</td>`;
				reward1 = op.rewards[0].item + " × " + op.rewards[0].value;
				reward2 = op.rewards[1].item + " × " + op.rewards[1].value;
				reward3 = op.rewards[2].item + " × " + op.rewards[2].value;
				reward4 = op.rewards[3].item + " × " + op.rewards[3].value;
				reward5 = op.rewards[4].item + " × " + op.rewards[4].value;
				corruption = op.corruption;
				let r1 = ""; let r2 = ""; let r3 = ""; let r4 = ""; let r5 = ""; let r6 = ""; let r7 = "";
				for(var z = 0; z < opsi.length; z++) {
					if(op.require[0] !== undefined && op.require[0] == 0) {
						r1 = `
							<tr>
								<td>0</td>
								<td>Port</td>
								<td>0</td>
								<td>None</td>
							</tr>
						`
					}
					if(op.require[0] !== undefined && op.require[0] == opsi[z].id) {
						r1 = `
							<tr>
								<td>${opsi[z].id}</td>
								<td>${opsi[z].name}</td>
								<td>${opsi[z].corruption}</td>
								<td>${opsi[z].require}</td>
							</tr>
						`
					}
					if(op.require[1] !== undefined && op.require[1] == opsi[z].id) {
						r2 = `
							<tr>
								<td>${opsi[z].id}</td>
								<td>${opsi[z].name}</td>
								<td>${opsi[z].corruption}</td>
								<td>${opsi[z].require}</td>
							</tr>
						`
					}
					if(op.require[2] !== undefined && op.require[2] == opsi[z].id) {
						r3 = `
							<tr>
								<td>${opsi[z].id}</td>
								<td>${opsi[z].name}</td>
								<td>${opsi[z].corruption}</td>
								<td>${opsi[z].require}</td>
							</tr>
						`
					}
					if(op.require[3] !== undefined && op.require[3] == opsi[z].id) {
						r4 = `
							<tr>
								<td>${opsi[z].id}</td>
								<td>${opsi[z].name}</td>
								<td>${opsi[z].corruption}</td>
								<td>${opsi[z].require}</td>
							</tr>
						`
					}
					if(op.require[4] !== undefined && op.require[4] == opsi[z].id) {
						r5 = `
							<tr>
								<td>${opsi[z].id}</td>
								<td>${opsi[z].name}</td>
								<td>${opsi[z].corruption}</td>
								<td>${opsi[z].require}</td>
							</tr>
						`
					}
					if(op.require[5] !== undefined && op.require[5] == opsi[z].id) {
						r6 = `
							<tr>
								<td>${opsi[z].id}</td>
								<td>${opsi[z].name}</td>
								<td>${opsi[z].corruption}</td>
								<td>${opsi[z].require}</td>
							</tr>
						`
					}
					if(op.require[6] !== undefined && op.require[6] == opsi[z].id) {
						r7 = `
							<tr>
								<td>${opsi[z].id}</td>
								<td>${opsi[z].name}</td>
								<td>${opsi[z].corruption}</td>
								<td>${opsi[z].require}</td>
							</tr>
						`
					}
				}
				requireZone = `<tbody>${r1 + r2 + r3 + r4 + r5 + r6 + r7}</tbody>`;
				if(op.stars[3].formatted == "Recover 1 record file(s).") {
					file = op.stars[3].file;
					record = op.stars[3].value;
					recordFile = file + " - " + record;
				}
			}}
		usr = usr1 + usr2 + usr3 + usr4 + usr5;
		let rw1 = ""; let rw2 = ""; let rw3 = ""; let rw4 = ""; let rw5 = "";
		if (usr == 1 && op.id < 150) {rw1 = "trueUnlock"; rw2 = ""; rw3 = ""; rw4 = ""; rw5 = "";}
		if (usr == 2 && op.id < 150) {rw1 = "trueUnlock"; rw2 = "trueUnlock"; rw3 = ""; rw4 = ""; rw5 = "";}
		if (usr == 3 && op.id < 150) {rw1 = "trueUnlock"; rw2 = "trueUnlock"; rw3 = "trueUnlock"; rw4 = ""; rw5 = "";}
		if (usr == 4 && op.id < 150) {rw1 = "trueUnlock"; rw2 = "trueUnlock"; rw3 = "trueUnlock"; rw4 = "trueUnlock"; rw5 = "";}
		if (usr == 5 && op.id < 150) {rw1 = "trueUnlock"; rw2 = "trueUnlock"; rw3 = "trueUnlock"; rw4 = "trueUnlock"; rw5 = "trueUnlock";}

		if(op.id !== 154) {
			straw = `
				<table class="table table-bordered text-center align-middle">
					<thead>
						<tr>
							<th style="width: 5%!important">No.</th>
							<th style="width: 47.5%!important">Stars</th>
							<th style="width: 47.5%!important">Rewards</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td class="${us1}"><strong>1</strong></td>
							${star1}
							<td class="${rw1}">${reward1}</td>
						</tr>
						<tr>
							<td class="${us2}"><strong>2</strong></td>
							${star2}
							<td class="${rw2}">${reward2}</td>
						</tr>
						<tr>
							<td class="${us3}"><strong>3</strong></td>
							${star3}
							<td class="${rw3}">${reward3}</td>
						</tr>
						<tr>
							<td class="${us4}"><strong>4</strong></td>
							${star4}
							<td class="${rw4}">${reward4}</td>
						</tr>
						<tr>
							<td class="${us5}"><strong>5</strong></td>
							${star5}
							<td class="${rw5}">${reward5}</td>
						</tr>
					</tbody>
				</table>
			`
		} else {straw = ""}
		modal = `
			<div class="modal fade modal${id}" tabindex="-1" role="dialog" aria-labelledby="myExtraLargeModalLabel" aria-hidden="true">
		    	<div class="modal-dialog modal-xl">
		    		<div class="modal-content">
		    			<table class="table table-bordered text-center align-middle">
		    				<thead>
		    					<tr>
		    						<th colspan="2">${name}</th>
		    					</tr>
		    					<tr>
				    				<th style="width: 50%!important">Zone ID</th>
				    				<th style="width: 50%!important">${id}</th>
			    				</tr>
		    					<tr>
				    				<th>Record File</th>
				    				<th>${recordFile}</th>
			    				</tr>
			    				<tr>
				    				<th>Corruption</th>
				    				<th>${corruption}</th>
			    				</tr>
		    				</thead>
	    				</table>
	    				<table class="table table-bordered text-center align-middle">
		    				<thead>
			    				<tr>
				    				<th colspan="4">Require Zone to Unlock</th>
			    				</tr>
			    				<tr>
			    					<th>ID</th>
			    					<th>Zone</th>
			    					<th>Corruption</th>
			    					<th>Requires</th>
			    				</tr>
		    				</thead>
		    				${requireZone}
	    				</table>
	    				${straw}
		    		</div>
		    	</div>
		    </div>
		`
		$(".modal-container").append(modal)
	}
</script>
</body>